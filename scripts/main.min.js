"use strict";function addPopup(e){e.magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeMarkup:'<a class="popup-close popup-modal-dismiss" href="#"><i class="is-icons is-icons--close-lg"></i></a>',closeBtnInside:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$("body").addClass("mfp-helper")},close:function(){$("body").removeClass("mfp-helper")}}})}function initMap(){var e={center:new google.maps.LatLng(59.91916157,30.3251195),zoom:16,mapTypeControl:!1,zoomControl:!1,scrollwheel:!1},s=document.getElementById("map"),a=new google.maps.Map(s,e);new google.maps.Marker({position:new google.maps.LatLng(59.91916157,30.3251195),map:a,icon:"images/icons/bubble.svg"})}$(document).ready(function(){function e(){t.load(),t.on("loadstart",function(e){$("body").addClass("loading")}),t.on("canplay",function(e){$("body").removeClass("loading")}),t[0].play()}function s(e,s,a){$(e).mouseover(function(e){var a=void 0,t=$(this).data("avail"),o=$(this).data("floor"),i=$(this).data("link"),n=$(this).data("num"),r=$(window).width(),l=$(document).outerHeight(),p=$(this).position(),d=p.left,c=(p.top,r-d),v=l-e.pageY,m=100*c/r;"undefined"!=typeof t&&t!==!1&&(a="0"!=t?i?n?"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+n+"<br> свободен</b></div><div class='svg-popover__right'><a href='"+i+"' class='text--white text--uppercase'><b>Подробнее...</b></a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+o+"<br> этаж</b></div><div class='svg-popover__right'><a href='"+i+"' class='text--white text--uppercase'>"+t+" офисов свободно</a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+o+"<br> этаж</b></div><div class='svg-popover__right'>"+t+" офисов свободно</div>":i&&n?"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+n+"<br> занят</b></div><div class='svg-popover__right svg-popover__right--un'><a href='"+i+"' class='text--white text--uppercase'><b>Подробнее...</b></a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+o+"<br> этаж</b></div><div class='svg-popover__right svg-popover__right--un'><div>Нет свободных помещений<br><a href='"+i+"' class='text--primary text--uppercase'>Подробнее...</a></div></div>",1==s?$(".genplan-pop").addClass("active").css({right:"30%",bottom:v+"px"}).find(".genplan-pop__wrapper").html(a):$(".genplan-pop").addClass("active").css({right:"calc("+m+"% - 50px)",bottom:v+20+"px"}).find(".genplan-pop__wrapper").html(a))}).mouseout(function(){a&&$(".genplan-pop__wrapper").html("")})}function a(a,r,l,p,d){$("."+a).click(function(){$(".b-video .b-video__mp4").attr("src",r),$(".genplan-pop__formobile").removeClass("active");var c=$(this).parent().data("build"),v=$(this).parent().data("square"),m=$(this).parent().data("offices"),u=$(this).parent().data("squares"),f=$(this).parent().data("floor"),g=$(this).parent().data("free"),h=$(this).parent().data("busy"),b=$(this).parent().data("info");$(this).parent().data("svg");o.show().addClass(a),i.addClass("animated fadeIn");var _='<image x="0" y="0" width="1900" height="1080" preserveaspectratio="none" xlink:href="'+l+'"></image>'+d;return e(),t.on("ended",function(){$(".genplan-build--js").html(c),$(".genplan-square--js").html(v),$(".genplan-offices--js").html(m),$(".genplan-squares--js").html(u),$(".genplan-floor--js").html(f),$(".genplan-free--js").html(g),$(".genplan-busy--js").html(h),$(".genplan-info--js").html(b),$(".genplan-main__item svg").html(_),i.addClass("fadeOut"),n.addClass("animated fadeIn"),s("polygon",!0),setTimeout(function(){i.removeClass("animated fadeIn fadeOut")},1e3)}),$("."+a+" .genplan-back--js").click(function(){return $(".b-video .b-video__mp4").attr("src",p),$(".genplan-pop").removeClass("active").find(".genplan-pop__wrapper").html(""),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html(""),n.addClass("fadeOut"),i.addClass("animated fadeIn"),e(),t.on("ended",function(){i.addClass("fadeOut"),n.removeClass("animated fadeIn fadeOut"),setTimeout(function(){i.removeClass("animated fadeIn fadeOut"),$("."+a+":not(.svg-popover__hide)").hide(),o.removeClass(a)},1e3)}),!1}),!1})}var t=$(".b-video"),o=$(".genplan-main__sub"),i=$(".genplan-main__video"),n=$(".genplan-main__item"),r=Math.max(document.documentElement.clientWidth,window.innerWidth||0);s("polygon",!1,!0),s("path",!1,!0),$(".svg-main rect").each(function(){var e=($(this),$(this).data("build")),s=$(this).data("type"),a=$(this).data("avail"),t=$(this).data("class"),o=$(this).data("reverse"),i=$(this).data("square"),n=$(this).data("offices"),l=$(this).data("squares"),p=$(this).data("floor"),d=$(this).data("free"),c=$(this).data("busy"),v=$(this).data("info"),m=$(this).data("vin"),u=$(this).data("vout"),f=$(this).data("vimg"),g=$(this).data("svg"),h=void 0,b=void 0;r<=767?(h=$(document).outerHeight(),b=$(this).position().top):(h=$(".svg-main").height(),b=$(this).attr("y"));var _=$(".svg-main").width(),C=$(this).position().left,w=_-C,y=h-b,x=100*y/h,k=100*w/_,T=100*C/_,j="<div class='svg-popover__inner'>Лит <b>"+e+"</b></div><div class='svg-popover__hide'></div><div class='genplan-pop__formobile'></div>",P=$("<div/>",{"class":"svg-popover",html:j,"data-type":s,"data-avail":a,"data-class":t,"data-build":e,"data-square":i,"data-offices":n,"data-squares":l,"data-floor":p,"data-free":d,"data-busy":c,"data-info":v,"data-vin":m,"data-vout":u,"data-vimg":f,"data-svg":g});o?r<=767?P.css({left:T+1+"%",bottom:x+5+"%"}).addClass("svg-popover--reverse"):r>767&&r<=900?P.css({left:T+1+"%",bottom:x+7+"%"}).addClass("svg-popover--reverse"):r>900&&r<=1e3?P.css({left:T+1+"%",bottom:x+7+"%"}).addClass("svg-popover--reverse"):r>1e3&&r<=1100?P.css({left:T+1+"%",bottom:x+15+"%"}).addClass("svg-popover--reverse"):r>1100&&r<=1200?P.css({left:T+1+"%",bottom:x+7+"%"}).addClass("svg-popover--reverse"):r>1200&&r<=1300?P.css({left:T+1+"%",bottom:x+7+"%"}).addClass("svg-popover--reverse"):r>1300&&r<=1400?P.css({left:T+1+"%",bottom:x+7+"%"}).addClass("svg-popover--reverse"):r>1400&&r<=1500?P.css({left:T+1+"%",bottom:x+4+"%"}).addClass("svg-popover--reverse"):r>1500&&r<=1600?P.css({left:T+1+"%",bottom:x+3+"%"}).addClass("svg-popover--reverse"):P.css({left:T+1+"%",bottom:x-4+"%"}).addClass("svg-popover--reverse"):r<=767?P.css({right:k-4+"%",bottom:x+2+"%"}):r>767&&r<=900?P.css({left:T+1+"%",bottom:x+9+"%"}).addClass("svg-popover--reverse"):r>900&&r<=1e3?P.css({left:T+1+"%",bottom:x+9+"%"}).addClass("svg-popover--reverse"):r>1e3&&r<=1100?P.css({left:T+1+"%",bottom:x+12+"%"}).addClass("svg-popover--reverse"):r>1100&&r<=1200?P.css({left:T+1+"%",bottom:x+12+"%"}).addClass("svg-popover--reverse"):r>1200&&r<=1300?P.css({left:T+1+"%",bottom:x+9+"%"}).addClass("svg-popover--reverse"):r>1300&&r<=1400?P.css({left:T+1+"%",bottom:x+6.5+"%"}).addClass("svg-popover--reverse"):r>1400&&r<=1500?P.css({left:T+1+"%",bottom:x+4+"%"}).addClass("svg-popover--reverse"):r>1500&&r<=1600?P.css({left:T+1+"%",bottom:x+3+"%"}).addClass("svg-popover--reverse"):P.css({right:k-4+"%",bottom:x-4+"%"}),e&&$(".popovers--js").append(P)}),$(".svg-popover__inner").mouseover(function(){$(".genplan-pop__formobile").removeClass("active"),$(".svg-popover__inner").removeClass("active"),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html(""),$(this).addClass("active");var e=$(this).parent().data("build"),s=$(this).parent().data("type"),t=$(this).parent().data("avail"),o=$(this).parent().data("class"),i=($(this).parent().data("floor"),$(this).parent().data("vin")),n=$(this).parent().data("vout"),l=$(this).parent().data("vimg"),p=$(this).parent().data("svg"),d=void 0;"0"!=t?(d="<div class='svg-popover__left'><b class='text--grey'>Литер "+e+"</b><br>"+s+"</div><div class='svg-popover__right'>"+t+" офисов свободно</div>",r<=767?$(this).parent().addClass("active").find(".genplan-pop__formobile").addClass("active "+o).html(d):$(this).parent().addClass("active").find(".svg-popover__hide").addClass(o).html(d)):(d="<div class='svg-popover__left'><b class='text--grey'>Литер "+e+"</b><br>"+s+"</div><div class='svg-popover__right svg-popover__right--un'><div>Нет свободных помещений <br><span class='text--primary text--uppercase'>Подробнее...</span></div></div>",r<=767?$(this).parent().addClass("active").find(".genplan-pop__formobile").addClass("active --un "+o).html(d):$(this).parent().addClass("active").find(".svg-popover__hide").addClass("--un "+o).html(d)),a(o,i,l,n,p)}).mouseout(function(){}),$(".svg-main").mouseover(function(){$(".genplan-pop__formobile").removeClass("active"),$(".svg-popover__inner").removeClass("active"),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html("")}),$(".sub-svg image").mouseover(function(){$(".genplan-pop").removeClass("active").find(".genplan-pop__wrapper").html("")})}),$(document).ready(function(){function e(e){$(window).on("wheel",{$slider:e},s)}function s(e){e.preventDefault();var s=e.data.$slider,a=e.originalEvent.deltaY;a>0?s.slick("slickPrev"):s.slick("slickNext")}function a(e,s){l.noUiSlider.updateOptions({start:[e,s]}),p.noUiSlider.updateOptions({start:[e,s]})}var t=$(".aside-menu");if(t.length){var o=t.offset().top;$(window).scroll(function(){$(window).scrollTop()>o?t.css({position:"fixed",top:"10px",width:"31%"}):t.css({position:"static",width:"100%",top:0})})}var i=$(".slideshow");i.on("init",function(){e(i)}).slick({dots:!0,vertical:!0,arrows:!1,draggable:!0}),i.slickAnimation(),$(".slider-for").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1,responsive:[{breakpoint:768,settings:{dots:!1,asNavFor:".slider-nav",arrows:!0,appendArrows:".slider-arrow",nextArrow:'<div class="slider-arrow-left slick-arrow"><i class="is-icons is-icons--next-arr"></i></div>',prevArrow:'<div class="slider-arrow-right slick-arrow"><i class="is-icons is-icons--prev-arr"></i></div>'}}]}),$(".slider-nav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".slider-for",dots:!1,focusOnSelect:!0}),$(".slider-plan").slick({slidesToShow:2,slidesToScroll:1,arrows:!0,appendArrows:".slider-arrow",nextArrow:'<div class="slider-arrow-left slick-arrow"><i class="is-icons is-icons--next-arr"></i></div>',prevArrow:'<div class="slider-arrow-right slick-arrow"><i class="is-icons is-icons--prev-arr"></i></div>',responsive:[{breakpoint:768,settings:{dots:!0,arrows:!1}}]}),$(".mobile-slider").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1,responsive:[{breakpoint:768,settings:"unslick"}]}),$(".contacts-link--js").click(function(){return $(".contacts-map").toggleClass("active"),!1}),$(".table--mobile-anim td:first-child").click(function(){$(this).parent().toggleClass("opened").siblings().removeClass("opened")}),$(".main-nav__toggle--js").click(function(){$(this).next().toggleClass("collapse")}),$(".main-nav__close--js i").click(function(){$(this).parent().parent().removeClass("collapse")});var n=$(".playbutton"),r=$("video");n.click(function(){$(this).hide(),r.prop("controls",!0),r.get(0).play()}),$(".tooltip--js").mouseover(function(){var e=$(this).data("tooltip");$(this).find(".tooltip").html(e).addClass("active")}).mouseout(function(){$(this).find(".tooltip").removeClass("active")}),$(".popover--js").click(function(){var e=$(this).data("popover"),s=$(this).data("btn"),a=$(this).data("href");if(s)var t='<a class="btn btn--full btn--outlined popupka" href="'+a+'">'+s+"</a>";$(this).next().html('<div class="mb50">'+e+"</div>"+t+'<div class="popover-close"><span class="is-icons is-icons--close"></span></div>').addClass("active"),addPopup($(".popupka")),setTimeout(function(){$(".popover-close, body").on("click.off-popover",function(){$(".popover").removeClass("active"),$(".popover-close, body").off("click.off-popover")})},100)});var l=document.getElementById("range"),p=document.getElementById("rangep"),d=document.getElementById("reset--js");if($("#range").length){noUiSlider.create(l,{start:[0,600],connect:!0,step:100,decimals:0,range:{min:[0],max:3e3},pips:{mode:"values",values:[0,3e3],density:4,format:wNumb({decimals:0,thousand:"",postfix:"м2"})},format:wNumb({decimals:0,thousand:"",postfix:"м<sup>2</sup>"})}),noUiSlider.create(p,{start:[0,1400],connect:!0,step:100,decimals:0,range:{min:[0],max:3500},pips:{mode:"values",values:[0,3500],density:4,format:wNumb({decimals:0,thousand:"",postfix:"P"})},format:wNumb({decimals:0,thousand:"",postfix:"P/м<sup>2</sup>"})});var c=[document.getElementById("skip-value-lower"),document.getElementById("skip-value-upper")],v=[document.getElementById("pskip-value-lower"),document.getElementById("pskip-value-upper")];l.noUiSlider.on("update",function(e,s){c[s].innerHTML=e[s]}),p.noUiSlider.on("update",function(e,s){v[s].innerHTML=e[s]}),d.addEventListener("click",function(){a(0,0)})}$(".show--js").click(function(){return $(this).hide(),$(this).parent().next().slideDown(),!1}),$(".search-me--js").click(function(){return $(".search-results").slideDown(),!1}),$("[name=phone]").mask("+7 (999) 999-99-99"),$(".popup-in").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",showCloseBtn:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$("body").addClass("mfp-helper")},close:function(){$("body").removeClass("mfp-helper")}}}),addPopup($(".popup")),$(document).on("click",".popup-modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),$(".popup-gallery").magnificPopup({delegate:"a",type:"image",closeMarkup:'<a class="popup-close popup-modal-dismiss" href="#"><i class="is-icons is-icons--close-lg"></i></a>',mainClass:"mfp-zoom-in",closeBtnInside:!1,gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1],tCounter:""},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}},removalDelay:300,callbacks:{open:function(){$.magnificPopup.instance.next=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){$.magnificPopup.proto.next.call(e)},120)},$.magnificPopup.instance.prev=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){$.magnificPopup.proto.prev.call(e)},120)}},imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},16)}}});var m=function(e){return $(e).text().replace(" ","")};$(".table-sort").tablesorter({sortList:[[0,0],[1,0]],textExtraction:m})});var screen_width=Math.max(document.documentElement.clientWidth,window.innerWidth||0);