"use strict";function addPopup(e){e.magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeMarkup:'<a class="popup-close popup-modal-dismiss" href="#"><i class="is-icons is-icons--close-lg"></i></a>',closeBtnInside:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$("body").addClass("mfp-helper")},close:function(){$("body").removeClass("mfp-helper")}}})}function initMap(){var e={center:new google.maps.LatLng(59.91916157,30.3251195),zoom:16,mapTypeControl:!1,zoomControl:!1,scrollwheel:!1},a=document.getElementById("map"),s=new google.maps.Map(a,e);new google.maps.Marker({position:new google.maps.LatLng(59.91916157,30.3251195),map:s,icon:"images/icons/bubble.svg"})}$(document).ready(function(){function e(){t.load(),t.on("loadstart",function(e){$("body").addClass("loading")}),t.on("canplay",function(e){$("body").removeClass("loading")}),t[0].play()}function a(e,a){$(e).mouseover(function(e){var s=void 0,t=$(this).data("avail"),i=$(this).data("floor"),o=$(this).data("link"),n=$(this).data("num"),r=$(window).width(),l=$(document).outerHeight(),p=$(this).position(),d=p.left,c=(p.top,r-d),v=l-e.pageY,m=100*c/r;"undefined"!=typeof t&&t!==!1&&(s="0"!=t?o?n?"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+n+"<br> свободен</b></div><div class='svg-popover__right'><a href='"+o+"' class='text--white text--uppercase'><b>Подробнее...</b></a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+i+"<br> этаж</b></div><div class='svg-popover__right'><a href='"+o+"' class='text--white text--uppercase'>"+t+" офисов свободно</a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+i+"<br> этаж</b></div><div class='svg-popover__right'>"+t+" офисов свободно</div>":o&&n?"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+n+"<br> занят</b></div><div class='svg-popover__right svg-popover__right--un'><a href='"+o+"' class='text--white text--uppercase'><b>Подробнее...</b></a></div>":"<div class='svg-popover__left'><b class='text--grey text--uppercase'>"+i+"<br> этаж</b></div><div class='svg-popover__right svg-popover__right--un'><div>Нет свободных помещений<br><a href='"+o+"' class='text--primary text--uppercase'>Подробнее...</a></div></div>",1==a?$(".genplan-pop").addClass("active").css({right:"30%",bottom:v+"px"}).find(".genplan-pop__wrapper").html(s):$(".genplan-pop").addClass("active").css({right:"calc("+m+"% - 50px)",bottom:v+10+"px"}).find(".genplan-pop__wrapper").html(s))}).mouseout(function(){})}function s(s,r,l,p,d){$("."+s).click(function(){$(".b-video .b-video__mp4").attr("src",r),$(".genplan-pop__formobile").removeClass("active");var c=$(this).parent().data("build"),v=$(this).parent().data("square"),m=$(this).parent().data("offices"),u=$(this).parent().data("squares"),f=$(this).parent().data("floor"),g=$(this).parent().data("free"),h=$(this).parent().data("busy"),b=$(this).parent().data("info");$(this).parent().data("svg");i.show().addClass(s),o.addClass("animated fadeIn");var _='<image x="0" y="0" width="1900" height="1080" preserveaspectratio="none" xlink:href="'+l+'"></image>'+d;return e(),t.on("ended",function(){$(".genplan-build--js").html(c),$(".genplan-square--js").html(v),$(".genplan-offices--js").html(m),$(".genplan-squares--js").html(u),$(".genplan-floor--js").html(f),$(".genplan-free--js").html(g),$(".genplan-busy--js").html(h),$(".genplan-info--js").html(b),$(".genplan-main__item svg").html(_),o.addClass("fadeOut"),n.addClass("animated fadeIn"),a("polygon",!0),setTimeout(function(){o.removeClass("animated fadeIn fadeOut")},1e3)}),$("."+s+" .genplan-back--js").click(function(){return $(".b-video .b-video__mp4").attr("src",p),$(".genplan-pop").removeClass("active").find(".genplan-pop__wrapper").html(""),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html(""),n.addClass("fadeOut"),o.addClass("animated fadeIn"),e(),t.on("ended",function(){o.addClass("fadeOut"),n.removeClass("animated fadeIn fadeOut"),setTimeout(function(){o.removeClass("animated fadeIn fadeOut"),$("."+s+":not(.svg-popover__hide)").hide(),i.removeClass(s)},1e3)}),!1}),!1})}var t=$(".b-video"),i=$(".genplan-main__sub"),o=$(".genplan-main__video"),n=$(".genplan-main__item"),r=Math.max(document.documentElement.clientWidth,window.innerWidth||0);a("polygon",!1),$(".svg-main rect").each(function(){var e=($(this),$(this).data("build")),a=$(this).data("type"),s=$(this).data("avail"),t=$(this).data("class"),i=$(this).data("reverse"),o=$(this).data("square"),n=$(this).data("offices"),l=$(this).data("squares"),p=$(this).data("floor"),d=$(this).data("free"),c=$(this).data("busy"),v=$(this).data("info"),m=$(this).data("vin"),u=$(this).data("vout"),f=$(this).data("vimg"),g=$(this).data("svg"),h=void 0,b=void 0;r<=767?(h=$(document).outerHeight(),b=$(this).position().top):(h=$(".svg-main").height(),b=$(this).attr("y"));var _=$(".svg-main").width(),w=$(this).position().left,C=_-w,y=h-b,x=100*y/h,k=100*C/_,T=100*w/_,P="<div class='svg-popover__inner'>Лит <b>"+e+"</b></div><div class='svg-popover__hide'></div><div class='genplan-pop__formobile'></div>",j=$("<div/>",{"class":"svg-popover",html:P,"data-type":a,"data-avail":s,"data-class":t,"data-build":e,"data-square":o,"data-offices":n,"data-squares":l,"data-floor":p,"data-free":d,"data-busy":c,"data-info":v,"data-vin":m,"data-vout":u,"data-vimg":f,"data-svg":g});i?r<=767?j.css({left:T+1+"%",bottom:x+15+"%"}).addClass("svg-popover--reverse"):j.css({left:T+1+"%",bottom:x-4+"%"}).addClass("svg-popover--reverse"):r<=767?j.css({right:k-4+"%",bottom:x+10+"%"}):j.css({right:k-4+"%",bottom:x-4+"%"}),e&&$(".popovers--js").append(j)}),$(".svg-popover__inner").mouseover(function(){$(".genplan-pop__formobile").removeClass("active"),$(".svg-popover__inner").removeClass("active"),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html(""),$(this).addClass("active");var e=$(this).parent().data("build"),a=$(this).parent().data("type"),t=$(this).parent().data("avail"),i=$(this).parent().data("class"),o=($(this).parent().data("floor"),$(this).parent().data("vin")),n=$(this).parent().data("vout"),l=$(this).parent().data("vimg"),p=$(this).parent().data("svg"),d=void 0;"0"!=t?(d="<div class='svg-popover__left'><b class='text--grey'>Литер "+e+"</b><br>"+a+"</div><div class='svg-popover__right'>"+t+" офисов свободно</div>",r<=767?$(this).parent().addClass("active").find(".genplan-pop__formobile").addClass("active "+i).html(d):$(this).parent().addClass("active").find(".svg-popover__hide").addClass(i).html(d)):(d="<div class='svg-popover__left'><b class='text--grey'>Литер "+e+"</b><br>"+a+"</div><div class='svg-popover__right svg-popover__right--un'><div>Нет свободных помещений <br><span class='text--primary text--uppercase'>Подробнее...</span></div></div>",r<=767?$(this).parent().addClass("active").find(".genplan-pop__formobile").addClass("active --un "+i).html(d):$(this).parent().addClass("active").find(".svg-popover__hide").addClass("--un "+i).html(d)),s(i,o,l,n,p)}).mouseout(function(){}),$(".svg-main").mouseover(function(){$(".genplan-pop__formobile").removeClass("active"),$(".svg-popover__inner").removeClass("active"),$(".svg-popover").removeClass("active").find(".svg-popover__hide").html("")}),$(".sub-svg image").mouseover(function(){$(".genplan-pop").removeClass("active").find(".genplan-pop__wrapper").html("")})}),$(document).ready(function(){function e(e){$(window).on("wheel",{$slider:e},a)}function a(e){e.preventDefault();var a=e.data.$slider,s=e.originalEvent.deltaY;s>0?a.slick("slickPrev"):a.slick("slickNext")}var s=$(".aside-menu");if(s.length){var t=s.offset().top;$(window).scroll(function(){$(window).scrollTop()>t?s.css({position:"fixed",top:"20px"}):s.css({position:"static"})})}$(".contacts-link--js").click(function(){return $(".contacts-map").toggleClass("active"),!1}),$(".table--mobile-anim td:first-child").click(function(){$(this).parent().toggleClass("opened").siblings().removeClass("opened")}),$(".main-nav__toggle--js").click(function(){$(this).next().toggleClass("collapse")}),$(".main-nav__close--js i").click(function(){$(this).parent().parent().removeClass("collapse")});var i=$(".playbutton"),o=$("video");if(i.click(function(){$(this).hide(),o.prop("controls",!0),o.get(0).play()}),$(".tooltip--js").mouseover(function(){var e=$(this).data("tooltip");$(this).find(".tooltip").html(e).addClass("active")}).mouseout(function(){$(this).find(".tooltip").removeClass("active")}),$(".popover--js").click(function(){var e=$(this).data("popover"),a=$(this).data("btn"),s=$(this).data("href");if(a)var t='<a class="btn btn--full btn--outlined popupka" href="'+s+'">'+a+"</a>";$(this).next().html('<div class="mb50">'+e+"</div>"+t+'<div class="popover-close"><span class="is-icons is-icons--close"></span></div>').addClass("active"),addPopup($(".popupka")),setTimeout(function(){$(".popover-close, body").on("click.off-popover",function(){$(".popover").removeClass("active"),$(".popover-close, body").off("click.off-popover")})},100)}),$("#range").length){var n=document.getElementById("range"),r=document.getElementById("rangep");noUiSlider.create(n,{start:[80,600],connect:!0,step:10,decimals:0,range:{min:[20],max:3e3},pips:{mode:"values",values:[20,3e3],density:4,format:wNumb({decimals:0,thousand:"",postfix:"м2"})},format:wNumb({decimals:0,thousand:"",postfix:"м<sup>2</sup>"})}),noUiSlider.create(r,{start:[900,1400],connect:!0,step:100,decimals:0,range:{min:[200],max:3500},pips:{mode:"values",values:[200,3500],density:4,format:wNumb({decimals:0,thousand:"",postfix:"P"})},format:wNumb({decimals:0,thousand:"",postfix:"P/м<sup>2</sup>"})});var l=[document.getElementById("skip-value-lower"),document.getElementById("skip-value-upper")],p=[document.getElementById("pskip-value-lower"),document.getElementById("pskip-value-upper")];n.noUiSlider.on("update",function(e,a){l[a].innerHTML=e[a]}),r.noUiSlider.on("update",function(e,a){p[a].innerHTML=e[a]})}$(".show--js").click(function(){return $(this).hide(),$(this).parent().next().slideDown(),!1}),$(".search-me--js").click(function(){return $(".search-results").slideDown(),!1}),$("[name=phone]").mask("+7 (999) 999-99-99");var d=$(".slideshow");d.on("init",function(){e(d)}).slick({dots:!0,vertical:!0,arrows:!1,draggable:!0}),d.slickAnimation(),$(".slider-for").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1,responsive:[{breakpoint:768,settings:{dots:!1,asNavFor:".slider-nav",arrows:!0,appendArrows:".slider-arrow",nextArrow:'<div class="slider-arrow-left slick-arrow"><i class="is-icons is-icons--next-arr"></i></div>',prevArrow:'<div class="slider-arrow-right slick-arrow"><i class="is-icons is-icons--prev-arr"></i></div>'}}]}),$(".slider-nav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".slider-for",dots:!1,focusOnSelect:!0}),$(".slider-plan").slick({slidesToShow:2,slidesToScroll:1,arrows:!0,appendArrows:".slider-arrow",nextArrow:'<div class="slider-arrow-left slick-arrow"><i class="is-icons is-icons--next-arr"></i></div>',prevArrow:'<div class="slider-arrow-right slick-arrow"><i class="is-icons is-icons--prev-arr"></i></div>',responsive:[{breakpoint:768,settings:{dots:!0,arrows:!1}}]}),$(".mobile-slider").slick({mobileFirst:!0,slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1,responsive:[{breakpoint:768,settings:"unslick"}]}),$(".popup-in").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",showCloseBtn:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in",callbacks:{beforeOpen:function(){$("body").addClass("mfp-helper")},close:function(){$("body").removeClass("mfp-helper")}}}),addPopup($(".popup")),$(document).on("click",".popup-modal-dismiss",function(e){e.preventDefault(),$.magnificPopup.close()}),$(".popup-gallery").magnificPopup({delegate:"a",type:"image",closeMarkup:'<a class="popup-close popup-modal-dismiss" href="#"><i class="is-icons is-icons--close-lg"></i></a>',mainClass:"mfp-zoom-in",closeBtnInside:!1,gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1],tCounter:""},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}},removalDelay:300,callbacks:{open:function(){$.magnificPopup.instance.next=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){$.magnificPopup.proto.next.call(e)},120)},$.magnificPopup.instance.prev=function(){var e=this;e.wrap.removeClass("mfp-image-loaded"),setTimeout(function(){$.magnificPopup.proto.prev.call(e)},120)}},imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},16)}}});var c=function(e){return $(e).text().replace(" ","")};$(".table-sort").tablesorter({sortList:[[0,0],[1,0]],textExtraction:c})});var screen_width=Math.max(document.documentElement.clientWidth,window.innerWidth||0);